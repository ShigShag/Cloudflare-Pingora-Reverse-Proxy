services:
  pingora-proxy:
    build:
      context: .
      dockerfile: Dockerfile
    image: pingora-proxy:latest
    container_name: pingora-proxy
    restart: unless-stopped

    ports:
      - "6188:6188"

    volumes:
      - ./config.yaml:/usr/src/pingora_proxy/config.yaml:ro
      - ./certificate:/usr/src/pingora_proxy/certificate:ro
      - ./static:/usr/src/pingora_proxy/static:ro

    environment:
      # Override these as needed
      PROXY_HOST: "0.0.0.0"
      PROXY_PORT: "6188"
      CERT_DIR: "/usr/src/pingora_proxy/certificate"
      CONFIG_PATH: "/usr/src/pingora_proxy/config.yaml"
      RUST_LOG: "info"

    networks:
      - proxy-network

networks:
  proxy-network:
    # Create with: docker network create proxy-network
    external: true
